<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BUK - Shadow Fight Arena</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e, #0f3460);
            overflow: hidden;
            user-select: none;
        }

        .game-container {
            width: 100vw;
            height: 100vh;
            position: relative;
            background: linear-gradient(180deg, #2c3e50 0%, #34495e 50%, #2c3e50 100%);
        }

        .intro-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(45deg, #000000, #1a1a2e, #000000);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: introFade 0.5s ease-in;
        }

        .intro-title {
            font-size: 4rem;
            font-weight: bold;
            color: #ff6b35;
            text-shadow: 0 0 20px #ff6b35;
            margin-bottom: 2rem;
            animation: titlePulse 2s infinite;
        }

        .intro-subtitle {
            font-size: 1.5rem;
            color: #ffffff;
            margin-bottom: 3rem;
            opacity: 0.8;
        }

        .start-button {
            padding: 1rem 3rem;
            font-size: 1.5rem;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
        }

        .start-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.5);
        }

        @keyframes titlePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes introFade {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .arena {
            width: 100%;
            height: 100vh;
            position: relative;
            background: linear-gradient(180deg, #87CEEB 0%, #4682B4 30%, #2F4F4F 70%, #1C1C1C 100%);
            overflow: hidden;
        }

        .ground {
            position: absolute;
            bottom: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(180deg, #654321 0%, #4a3728 50%, #2d1810 100%);
            border-top: 5px solid #8B4513;
        }

        .fighter {
            position: absolute;
            bottom: 150px;
            width: 80px;
            height: 120px;
            transition: all 0.1s ease;
        }

        .kirmada {
            left: 200px;
        }

        .baba {
            right: 200px;
        }

        /* Character Body Parts */
        .fighter::before {
            content: '';
            position: absolute;
            top: 5px;
            left: 50%;
            transform: translateX(-50%);
            width: 25px;
            height: 25px;
            border-radius: 50%;
            z-index: 2;
        }

        /* Head */
        .kirmada::before {
            background: radial-gradient(circle, #333 20%, #000 80%);
            border: 2px solid #111;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.1);
        }

        .baba::before {
            background: radial-gradient(circle, #3b82f6 20%, #1e40af 80%);
            border: 2px solid #1d4ed8;
            box-shadow: inset 0 0 10px rgba(255, 255, 255, 0.2);
        }

        /* Body */
        .fighter::after {
            content: '';
            position: absolute;
            top: 35px;
            left: 50%;
            transform: translateX(-50%);
            width: 35px;
            height: 50px;
            border-radius: 8px;
            z-index: 1;
        }

        .kirmada::after {
            background: linear-gradient(180deg, #1a1a1a 0%, #000 50%, #1a1a1a 100%);
            border: 2px solid #333;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.8);
        }

        .baba::after {
            background: linear-gradient(180deg, #1e3a8a 0%, #1e40af 50%, #1e3a8a 100%);
            border: 2px solid #3b82f6;
            box-shadow: 0 0 15px rgba(59, 130, 246, 0.6);
        }

        /* Arms */
        .fighter .arm-left, .fighter .arm-right {
            position: absolute;
            top: 40px;
            width: 8px;
            height: 35px;
            border-radius: 4px;
            z-index: 1;
        }

        .fighter .arm-left {
            left: 15px;
        }

        .fighter .arm-right {
            right: 15px;
        }

        .kirmada .arm-left, .kirmada .arm-right {
            background: linear-gradient(180deg, #1a1a1a, #000);
            border: 1px solid #333;
        }

        .baba .arm-left, .baba .arm-right {
            background: linear-gradient(180deg, #1e3a8a, #1e40af);
            border: 1px solid #3b82f6;
        }

        /* Legs */
        .fighter .leg-left, .fighter .leg-right {
            position: absolute;
            bottom: 0;
            width: 10px;
            height: 35px;
            border-radius: 5px;
        }

        .fighter .leg-left {
            left: 20px;
        }

        .fighter .leg-right {
            right: 20px;
        }

        .kirmada .leg-left, .kirmada .leg-right {
            background: linear-gradient(180deg, #1a1a1a, #000);
            border: 1px solid #333;
        }

        .baba .leg-left, .baba .leg-right {
            background: linear-gradient(180deg, #1e3a8a, #1e40af);
            border: 1px solid #3b82f6;
        }

        /* Eyes */
        .fighter .eye-left, .fighter .eye-right {
            position: absolute;
            top: 12px;
            width: 3px;
            height: 3px;
            border-radius: 50%;
            background: #ff0000;
        }

        .fighter .eye-left {
            left: 35px;
        }

        .fighter .eye-right {
            right: 35px;
        }

        .baba .eye-left, .baba .eye-right {
            background: #00ffff;
        }

        .health-bar {
            position: absolute;
            top: 30px;
            width: 300px;
            height: 25px;
            background: linear-gradient(90deg, #2d1810, #4a3728);
            border: 3px solid #8B4513;
            border-radius: 15px;
            overflow: hidden;
        }

        .health-bar.left {
            left: 50px;
        }

        .health-bar.right {
            right: 50px;
        }

        .health-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #cc0000, #ff0000);
            transition: width 0.3s ease;
            border-radius: 10px;
        }

        .health-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
            font-size: 14px;
            text-shadow: 1px 1px 2px black;
        }

        .mana-bar {
            position: absolute;
            top: 65px;
            width: 300px;
            height: 15px;
            background: linear-gradient(90deg, #1a1a2e, #16213e);
            border: 2px solid #4169E1;
            border-radius: 10px;
            overflow: hidden;
        }

        .mana-bar.left {
            left: 50px;
        }

        .mana-bar.right {
            right: 50px;
        }

        .mana-fill {
            height: 100%;
            background: linear-gradient(90deg, #4169E1, #0000FF, #4169E1);
            transition: width 0.3s ease;
            border-radius: 8px;
            animation: manaGlow 2s ease-in-out infinite;
        }

        @keyframes manaGlow {
            0%, 100% { box-shadow: 0 0 5px #4169E1; }
            50% { box-shadow: 0 0 15px #4169E1; }
        }

        .controls {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            color: white;
            font-size: 12px;
            border: 2px solid #ff6b35;
        }

        .dialogue-box {
            position: absolute;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.9);
            color: #ff6b35;
            padding: 15px 25px;
            border-radius: 15px;
            border: 2px solid #ff6b35;
            font-size: 16px;
            font-weight: bold;
            text-align: center;
            min-width: 300px;
            animation: dialogueAppear 0.5s ease;
            z-index: 100;
        }

        @keyframes dialogueAppear {
            from { opacity: 0; transform: translateX(-50%) translateY(20px); }
            to { opacity: 1; transform: translateX(-50%) translateY(0); }
        }

        .attack-effect {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: radial-gradient(circle, #ffff00, #ff6600);
            animation: attackBurst 0.3s ease-out forwards;
            pointer-events: none;
            z-index: 50;
        }

        @keyframes attackBurst {
            0% {
                transform: scale(0);
                opacity: 1;
            }
            100% {
                transform: scale(2);
                opacity: 0;
            }
        }

        .magic-effect {
            position: absolute;
            pointer-events: none;
            z-index: 60;
        }

        .fireball {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: radial-gradient(circle, #ff4500, #ff6347, #ff0000);
            box-shadow: 0 0 20px #ff4500;
            animation: fireballMove 1s linear forwards;
        }

        @keyframes fireballMove {
            0% { transform: scale(1) rotate(0deg); }
            100% { transform: scale(1.5) rotate(360deg); }
        }

        .minion {
            position: absolute;
            width: 40px;
            height: 60px;
            background: linear-gradient(180deg, #800080, #4B0082);
            border: 1px solid #8B008B;
            border-radius: 5px;
            bottom: 150px;
            transition: all 0.2s ease;
        }

        .minion::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 50%;
            transform: translateX(-50%);
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #8B0000;
        }

        .chair {
            position: absolute;
            width: 60px;
            height: 80px;
            bottom: 150px;
            background: linear-gradient(180deg, #8B4513, #654321);
            border: 2px solid #A0522D;
            border-radius: 5px;
        }

        .chair::before {
            content: '';
            position: absolute;
            top: -20px;
            left: 5px;
            width: 50px;
            height: 25px;
            background: linear-gradient(180deg, #8B4513, #654321);
            border: 2px solid #A0522D;
            border-radius: 5px 5px 0 0;
        }

        .lightning {
            position: absolute;
            width: 6px;
            height: 200px;
            background: linear-gradient(180deg, #FFFF00, #FFFFFF, #FFFF00);
            box-shadow: 0 0 20px #FFFF00;
            animation: lightningStrike 0.5s ease-out forwards;
        }

        @keyframes lightningStrike {
            0% { height: 0; opacity: 1; }
            50% { height: 200px; opacity: 1; }
            100% { height: 200px; opacity: 0; }
        }

        .ice-shard {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 40px solid #87CEEB;
            filter: drop-shadow(0 0 10px #87CEEB);
            animation: iceShardFly 0.8s linear forwards;
        }

        @keyframes iceShardFly {
            0% { transform: scale(0) rotate(0deg); }
            100% { transform: scale(1.5) rotate(720deg); }
        }

        .jumping {
            animation: jumpAnimation 0.6s ease-in-out;
        }

        @keyframes jumpAnimation {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-80px); }
        }

        .attacking {
            animation: attackAnimation 0.3s ease-in-out;
        }

        @keyframes attackAnimation {
            0%, 100% { transform: scaleX(1); }
            50% { transform: scaleX(1.2); }
        }

        .blocking {
            animation: blockAnimation 0.4s ease-in-out;
        }

        @keyframes blockAnimation {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.9); }
        }

        .magic-casting {
            animation: magicCast 1s ease-in-out;
            filter: brightness(1.5) saturate(2);
        }

        @keyframes magicCast {
            0%, 100% { transform: scale(1); filter: brightness(1) saturate(1); }
            50% { transform: scale(1.1); filter: brightness(2) saturate(3); }
        }

        .game-over {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: #ff6b35;
            padding: 40px;
            border-radius: 20px;
            border: 3px solid #ff6b35;
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            z-index: 200;
        }

        .restart-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
        }

        .combo-indicator {
            position: absolute;
            top: 80px;
            left: 50%;
            transform: translateX(-50%);
            color: #ffff00;
            font-size: 20px;
            font-weight: bold;
            text-shadow: 2px 2px 4px black;
            animation: comboFlash 0.5s ease-in-out;
        }

        @keyframes comboFlash {
            0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.7; transform: translateX(-50%) scale(1.2); }
        }

        .magic-indicator {
            position: absolute;
            top: 120px;
            left: 50%;
            transform: translateX(-50%);
            color: #4169E1;
            font-size: 18px;
            font-weight: bold;
            text-shadow: 2px 2px 4px black;
            animation: magicFlash 0.8s ease-in-out;
        }

        @keyframes magicFlash {
            0%, 100% { opacity: 1; transform: translateX(-50%) scale(1); }
            50% { opacity: 0.8; transform: translateX(-50%) scale(1.3); }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="intro-screen" id="introScreen">
            <div class="intro-title">BUK</div>
            <div class="intro-subtitle">Shadow Fight Arena - Magic Edition</div>
            <button class="start-button" onclick="startGame()">BEGIN THE MAGICAL BATTLE</button>
        </div>

        <div class="arena" id="arena" style="display: none;">
            <div class="ground"></div>
            
            <div class="health-bar left">
                <div class="health-fill" id="kirmadaHealth" style="width: 100%;"></div>
                <div class="health-text">KIRMADA</div>
            </div>
            
            <div class="mana-bar left">
                <div class="mana-fill" id="kirmadaMana" style="width: 100%;"></div>
            </div>
            
            <div class="health-bar right">
                <div class="health-fill" id="babaHealth" style="width: 100%;"></div>
                <div class="health-text">BABA</div>
            </div>

            <div class="mana-bar right">
                <div class="mana-fill" id="babaMana" style="width: 100%;"></div>
            </div>

            <div class="fighter kirmada" id="kirmada">
                <div class="arm-left"></div>
                <div class="arm-right"></div>
                <div class="leg-left"></div>
                <div class="leg-right"></div>
                <div class="eye-left"></div>
                <div class="eye-right"></div>
            </div>
            <div class="fighter baba" id="baba">
                <div class="arm-left"></div>
                <div class="arm-right"></div>
                <div class="leg-left"></div>
                <div class="leg-right"></div>
                <div class="eye-left"></div>
                <div class="eye-right"></div>
            </div>

            <div class="controls">
                <strong>CONTROLS:</strong><br>
                A/D - Move | W - Jump<br>
                J - Punch | K - Kick | L - Block<br>
                <strong>MAGIC:</strong><br>
                Q - ARISE (30 mana) | E - THUNDERSTRIKE (40 mana)<br>
                R - SIT (35 mana) | T - ICEWALL (45 mana)<br>
                Y - SHADOWCLONE (50 mana)
            </div>

            <div class="dialogue-box" id="dialogue" style="display: none;"></div>
            <div class="combo-indicator" id="comboIndicator" style="display: none;"></div>
            <div class="magic-indicator" id="magicIndicator" style="display: none;"></div>
        </div>
    </div>

   <script>
    class FightingGame {
        constructor() {
            this.gameStarted = false;
            this.kirmadaHealth = 400;
            this.babaHealth = 800;
            this.kirmadaMana = 100;
            this.babaMana = 100; // Baba has mana but won't use it
            this.kirmadaX = 200;
            this.babaX = window.innerWidth - 280;
            this.kirmadaCombo = [];
            this.babaCombo = [];
            this.minions = [];
            this.magicEffects = [];
            this.dialogues = [
                { speaker: 'Kirmada', text: 'Mere baba! Let the shadows consume you!' },
                { speaker: 'Baba', text: 'Yare Yare watashino Nitin nation! Your magic is weak!' },
                { speaker: 'Kirmada', text: 'ARISE, my dark servants!' },
                { speaker: 'Baba', text: 'I don\'t need magic to defeat you!' },
                { speaker: 'Kirmada', text: 'Thunder shall strike you down!' },
                { speaker: 'Baba', text: 'My fists will be your doom!' }
            ];
            this.currentDialogue = 0;
            this.gameOver = false;
            this.keys = {};
            this.lastAttack = 0;
            this.lastMagic = 0;
            this.babaAI = {
                lastAction: 0,
                nextAction: 0,
                aggressiveness: 1.5, // Increased aggressiveness to compensate for no magic
                magicCooldown: 0
            };
            
            this.bindEvents();
            this.showIntroDialogue();
        }

        // ... [keep all previous methods unchanged until babaAILoop] ...

        babaAILoop() {
            if (this.gameOver) return;
            
            const now = Date.now();
            const kirmada = document.getElementById('kirmada');
            const baba = document.getElementById('baba');
            const kirmadaRect = kirmada.getBoundingClientRect();
            const babaRect = baba.getBoundingClientRect();
            
            // Random actions
            if (now - this.babaAI.lastAction > this.babaAI.nextAction) {
                this.babaAI.lastAction = now;
                this.babaAI.nextAction = 300 + Math.random() * 1000; // Faster actions
                
                const action = Math.random();
                
                // Movement - more aggressive
                if (action < 0.4) {
                    // Move toward Kirmada
                    if (babaRect.left - kirmadaRect.right > 50) {
                        this.babaX = Math.max(window.innerWidth - 280, this.babaX - 40);
                        baba.style.left = this.babaX + 'px';
                    }
                } else if (action < 0.7) {
                    // Move away from Kirmada (less frequent)
                    if (kirmadaRect.right - babaRect.left < 150) {
                        this.babaX = Math.min(window.innerWidth - 100, this.babaX + 20);
                        baba.style.left = this.babaX + 'px';
                    }
                }
                
                // Attacks - more frequent and varied
                if (action < 0.9) {
                    const attackType = Math.random() < 0.6 ? 'punch' : 'kick'; // More punches
                    this.babaAttack(attackType);
                    this.babaCombo.push(attackType);
                    this.checkCombo('baba');
                }
                
                // Jump more frequently
                if (action < 0.5 && !baba.classList.contains('jumping')) {
                    baba.classList.add('jumping');
                    setTimeout(() => baba.classList.remove('jumping'), 600);
                }
            }
            
            setTimeout(() => this.babaAILoop(), 100);
        }

        manaRegenLoop() {
            if (this.gameOver) return;
            
            // Only Kirmada regenerates mana
            this.kirmadaMana = Math.min(100, this.kirmadaMana + 0.5);
            // Baba's mana stays at 100% but he won't use it
            this.updateMana();
            
            setTimeout(() => this.manaRegenLoop(), 100);
        }

        // ... [keep all remaining methods unchanged] ...
    }

    // Initialize the game
    const game = new FightingGame();

    function startGame() {
        game.startGame();
    }
</script>
</body>
</html>
